<div class="container">
  <h2>Questions</h2>

  <!-- Error Alert -->
  <div *ngIf="error()" class="alert alert-danger">
    {{ error() }}
  </div>

  <!-- Create Question Form -->
  <form [formGroup]="questionForm" (ngSubmit)="createQuestion()" class="mb-4">
    <div class="form-group mb-3">
      <input type="text" formControlName="text" class="form-control" placeholder="Question Text">
    </div>
    <div class="form-group mb-3">
      <select formControlName="type" class="form-select">
        <option *ngFor="let type of questionTypes" [value]="type">
          {{ type }}
        </option>
      </select>
    </div>
    <div class="form-group mb-3">
      <input type="number" formControlName="answerCount" class="form-control" placeholder="Answer Count">
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="!questionForm.valid || loading()">
      Create Question
    </button>
  </form>

  <!-- Loading Spinner -->
  <div *ngIf="loading()" class="text-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Questions List -->
  <div class="list-group">
    <div *ngFor="let question of questions()" class="list-group-item">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h5 class="mb-1">{{ question.text }}</h5>
          <small>
            Type: {{ question.type }} | Answers: {{ question.answerCount }}
          </small>
        </div>
        <div class="btn-group">
          <button class="btn btn-sm btn-outline-primary" [routerLink]="['/questions', question.id]">
            View
          </button>
          <button class="btn btn-sm btn-outline-danger" (click)="deleteQuestion(question.id)">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalElements() > 0" class="mt-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage() === 0">
        <button class="page-link" (click)="onPageChange(currentPage() - 1)">Previous</button>
      </li>
      <li class="page-item">
        <span class="page-link">Page {{ currentPage() + 1 }}</span>
      </li>
      <li class="page-item" [class.disabled]="(currentPage() + 1) * pageSize() >= totalElements()">
        <button class="page-link" (click)="onPageChange(currentPage() + 1)">Next</button>
      </li>
    </ul>
  </nav>
</div>
