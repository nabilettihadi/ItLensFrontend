<div class="container">
  <h2>Subjects</h2>

  <!-- Error Alert -->
  <div *ngIf="error()" class="alert alert-danger">
    {{ error() }}
  </div>

  <!-- Create Subject Form -->
  <form [formGroup]="subjectForm" (ngSubmit)="createSubject()" class="mb-4">
    <div class="form-group">
      <input type="text" formControlName="title" class="form-control" placeholder="Subject Title">
    </div>
    <button type="submit" class="btn btn-primary mt-2" [disabled]="!subjectForm.valid || loading()">
      Create Subject
    </button>
  </form>

  <!-- Loading Spinner -->
  <div *ngIf="loading()" class="text-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Subjects List -->
  <div class="list-group">
    <div *ngFor="let subject of subjects()" class="list-group-item">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h5 class="mb-1">{{ subject.title }}</h5>
          <small *ngIf="subject.children?.length">
            Subchapters: {{ subject.children.length }}
          </small>
        </div>
        <div class="btn-group">
          <button class="btn btn-sm btn-outline-primary" [routerLink]="['/subjects', subject.id]">
            View
          </button>
          <button class="btn btn-sm btn-outline-danger" (click)="deleteSubject(subject.id)">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalElements() > 0" class="mt-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage() === 0">
        <button class="page-link" (click)="onPageChange(currentPage() - 1)">Previous</button>
      </li>
      <li class="page-item">
        <span class="page-link">Page {{ currentPage() + 1 }}</span>
      </li>
      <li class="page-item" [class.disabled]="(currentPage() + 1) * pageSize() >= totalElements()">
        <button class="page-link" (click)="onPageChange(currentPage() + 1)">Next</button>
      </li>
    </ul>
  </nav>
</div>
